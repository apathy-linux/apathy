From 83cc11cdeb69b9c34559be3a14a0688582cf2dcc Mon Sep 17 00:00:00 2001
From: must_eat <mss@tutanota.de>
Date: Thu, 20 Apr 2023 19:41:07 +0300
Subject: [PATCH 4/4] rocm-rocr-runtime-rocm fix llvm dir.

---
 src/core/runtime/trap_handler/CMakeLists.txt | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/core/runtime/trap_handler/CMakeLists.txt b/src/core/runtime/trap_handler/CMakeLists.txt
index c98e104..b0f2463 100644
--- a/src/core/runtime/trap_handler/CMakeLists.txt
+++ b/src/core/runtime/trap_handler/CMakeLists.txt
@@ -43,8 +43,8 @@
 cmake_minimum_required ( VERSION 3.7 )
 
 # Import target 'clang' and 'llvm-objcopy'
-find_package(Clang REQUIRED HINTS ${CMAKE_PREFIX_PATH}/llvm PATHS /opt/rocm/llvm )
-find_package(LLVM REQUIRED HINTS ${CMAKE_PREFIX_PATH}/llvm PATHS /opt/rocm/llvm )
+find_package(Clang REQUIRED CONFIG HINTS ${LLVM_DIR}/../clang)
+find_package(LLVM REQUIRED CONFIG HINTS ${LLVM_DIR}/../llvm)
 
 set (TARGET_DEVS "gfx900;gfx1010;gfx1030;gfx1100")
 set (POSTFIX "9;1010;10;11")
-- 
2.40.0

