From 2cf4494366d0f31841885f9417c74654b33cfddc Mon Sep 17 00:00:00 2001
From: mssx86 <mss@tutanota.de>
Date: Thu, 7 Jul 2022 23:14:05 +0300
Subject: [PATCH 02/16] libc++ fixes.

---
 memory/mozalloc/throw_gcc.h | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/memory/mozalloc/throw_gcc.h b/memory/mozalloc/throw_gcc.h
index aeeb770ba7..a03447f977 100644
--- a/memory/mozalloc/throw_gcc.h
+++ b/memory/mozalloc/throw_gcc.h
@@ -74,50 +74,66 @@ __throw_bad_function_call(void) {
   mozalloc_abort("fatal: STL threw bad_function_call");
 }
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_logic_error(
     const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_domain_error(
     const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void
 __throw_invalid_argument(const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_length_error(
     const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_out_of_range(
     const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_runtime_error(
     const char* msg) {
   mozalloc_abort(msg);
 }
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_range_error(
     const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void
 __throw_overflow_error(const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
+#if !defined(_LIBCPP_VERSION)
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void
 __throw_underflow_error(const char* msg) {
   mozalloc_abort(msg);
 }
+#endif  // _LIBCPP_VERSION
 
 MOZ_THROW_NORETURN MOZ_THROW_EXPORT MOZ_THROW_INLINE void __throw_ios_failure(
     const char* msg) {
-- 
2.37.0

